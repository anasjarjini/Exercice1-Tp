<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QCM JavaScript</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #0264c6;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .question {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .question p {
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .options {
            margin-left: 20px;
        }
        
        .option {
            margin-bottom: 8px;
        }
        
        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        button {
            padding: 10px 20px;
            background-color: #052133;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        #resetBtn {
            background-color: #e74c3c;
        }
        
        #resetBtn:hover {
            background-color: #c0392b;
        }
        
        .correct {
            color: #27ae60;
            text-decoration: underline;
            font-weight: bold;
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Questionnaire QCM - JavaScript</h1>
        
        <form id="qcmForm">
            <!-- Question 1 (Choix multiple) -->
            <div class="question">
                <p>1. Quelles sont les caractéristiques principales de JavaScript ?</p>
                <div class="options">
                    <div class="option">
                        <input type="checkbox" id="q1a" name="q1" value="a">
                        <label for="q1a">Langage interprété côté client</label>
                    </div>
                    <div class="option">
                        <input type="checkbox" id="q1b" name="q1" value="b">
                        <label for="q1b">Langage compilé</label>
                    </div>
                    <div class="option">
                        <input type="checkbox" id="q1c" name="q1" value="c">
                        <label for="q1c">Langage orienté objet</label>
                    </div>
                    <div class="option">
                        <input type="checkbox" id="q1d" name="q1" value="d">
                        <label for="q1d">Langage typé statiquement</label>
                    </div>
                </div>
            </div>
            
            <!-- Question 2 (Choix multiple) -->
            <div class="question">
                <p>2. Quelles méthodes permettent de sélectionner des éléments en JavaScript ?</p>
                <div class="options">
                    <div class="option">
                        <input type="checkbox" id="q2a" name="q2" value="a">
                        <label for="q2a">getElementById()</label>
                    </div>
                    <div class="option">
                        <input type="checkbox" id="q2b" name="q2" value="b">
                        <label for="q2b">querySelector()</label>
                    </div>
                    <div class="option">
                        <input type="checkbox" id="q2c" name="q2" value="c">
                        <label for="q2c">selectElement()</label>
                    </div>
                    <div class="option">
                        <input type="checkbox" id="q2d" name="q2" value="d">
                        <label for="q2d">getElementsByClassName()</label>
                    </div>
                </div>
            </div>
            
            <!-- Question 3 (Choix multiple) -->
            <div class="question">
                <p>3. Quels sont les types de données primitifs en JavaScript ?</p>
                <div class="options">
                    <div class="option">
                        <input type="checkbox" id="q3a" name="q3" value="a">
                        <label for="q3a">Number</label>
                    </div>
                    <div class="option">
                        <input type="checkbox" id="q3b" name="q3" value="b">
                        <label for="q3b">String</label>
                    </div>
                    <div class="option">
                        <input type="checkbox" id="q3c" name="q3" value="c">
                        <label for="q3c">Array</label>
                    </div>
                    <div class="option">
                        <input type="checkbox" id="q3d" name="q3" value="d">
                        <label for="q3d">Boolean</label>
                    </div>
                </div>
            </div>
            
            <!-- Question 4 (Choix simple) -->
            <div class="question">
                <p>4. Quelle méthode permet d'ajouter un élément à la fin d'un tableau ?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q4a" name="q4" value="a">
                        <label for="q4a">push()</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q4b" name="q4" value="b">
                        <label for="q4b">pop()</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q4c" name="q4" value="c">
                        <label for="q4c">shift()</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q4d" name="q4" value="d">
                        <label for="q4d">unshift()</label>
                    </div>
                </div>
            </div>
            
            <!-- Question 5 (Choix simple) -->
            <div class="question">
                <p>5. Quelle est la syntaxe correcte pour déclarer une variable en JavaScript ?</p>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q5a" name="q5" value="a">
                        <label for="q5a">var maVariable;</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q5b" name="q5" value="b">
                        <label for="q5b">variable maVariable;</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q5c" name="q5" value="c">
                        <label for="q5c">let maVariable;</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q5d" name="q5" value="d">
                        <label for="q5d">const maVariable;</label>
                    </div>
                </div>
            </div>
            
            <div class="buttons">
                <button type="button" id="resetBtn">Initialiser le QCM</button>
                <button type="button" id="showAnswersBtn">Afficher les réponses</button>
                <button type="button" id="showResultsBtn">Afficher le résultat</button>
            </div>
        </form>
        
        <div id="result" class="result" style="display: none;"></div>
    </div>

    <script>
        // Définition des bonnes réponses
        const correctAnswers = {
            q1: ['a', 'c'], // Réponses correctes pour la question 1 (choix multiples)
            q2: ['a', 'b', 'd'], // Réponses correctes pour la question 2 (choix multiples)
            q3: ['a', 'b', 'd'], // Réponses correctes pour la question 3 (choix multiples)
            q4: 'a', // Réponse correcte pour la question 4 (choix simple)
            q5: 'c'  // Réponse correcte pour la question 5 (choix simple)
        };

        // Bouton pour initialiser le QCM
        document.getElementById('resetBtn').addEventListener('click', function() {
            document.getElementById('qcmForm').reset();
            document.getElementById('result').style.display = 'none';
        });

        // Bouton pour afficher toutes les questions et réponses dans une nouvelle fenêtre
        document.getElementById('showAnswersBtn').addEventListener('click', function() {
            const answersWindow = window.open('', 'Réponses du QCM', 'width=800,height=600,scrollbars=yes');
            
            let content = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Corrigé du QCM</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; }
                        .question { margin-bottom: 20px; }
                        .correct { color: #27ae60; text-decoration: underline; font-weight: bold; }
                    </style>
                </head>
                <body>
                    <h1>Corrigé du QCM JavaScript</h1>
            `;
            
            // Question 1
            content += `
                <div class="question">
                    <p><strong>1. Quelles sont les caractéristiques principales de JavaScript ?</strong></p>
                    <ul>
                        <li class="${correctAnswers.q1.includes('a') ? 'correct' : ''}">Langage interprété côté client</li>
                        <li>Langage compilé</li>
                        <li class="${correctAnswers.q1.includes('c') ? 'correct' : ''}">Langage orienté objet</li>
                        <li>Langage typé statiquement</li>
                    </ul>
                </div>
            `;
            
            // Question 2
            content += `
                <div class="question">
                    <p><strong>2. Quelles méthodes permettent de sélectionner des éléments en JavaScript ?</strong></p>
                    <ul>
                        <li class="${correctAnswers.q2.includes('a') ? 'correct' : ''}">getElementById()</li>
                        <li class="${correctAnswers.q2.includes('b') ? 'correct' : ''}">querySelector()</li>
                        <li>selectElement()</li>
                        <li class="${correctAnswers.q2.includes('d') ? 'correct' : ''}">getElementsByClassName()</li>
                    </ul>
                </div>
            `;
            
            // Question 3
            content += `
                <div class="question">
                    <p><strong>3. Quels sont les types de données primitifs en JavaScript ?</strong></p>
                    <ul>
                        <li class="${correctAnswers.q3.includes('a') ? 'correct' : ''}">Number</li>
                        <li class="${correctAnswers.q3.includes('b') ? 'correct' : ''}">String</li>
                        <li>Array</li>
                        <li class="${correctAnswers.q3.includes('d') ? 'correct' : ''}">Boolean</li>
                    </ul>
                </div>
            `;
            
            // Question 4
            content += `
                <div class="question">
                    <p><strong>4. Quelle méthode permet d'ajouter un élément à la fin d'un tableau ?</strong></p>
                    <ul>
                        <li class="${correctAnswers.q4 === 'a' ? 'correct' : ''}">push()</li>
                        <li>pop()</li>
                        <li>shift()</li>
                        <li>unshift()</li>
                    </ul>
                </div>
            `;
            
            // Question 5
            content += `
                <div class="question">
                    <p><strong>5. Quelle est la syntaxe correcte pour déclarer une variable en JavaScript ?</strong></p>
                    <ul>
                        <li>var maVariable;</li>
                        <li>variable maVariable;</li>
                        <li class="${correctAnswers.q5 === 'c' ? 'correct' : ''}">let maVariable;</li>
                        <li>const maVariable;</li>
                    </ul>
                </div>
            `;
            
            content += `</body></html>`;
            
            answersWindow.document.write(content);
            answersWindow.document.close();
            
            // Ajuster la taille de la fenêtre selon le contenu
            setTimeout(() => {
                answersWindow.resizeTo(850, answersWindow.document.body.scrollHeight + 100);
            }, 100);
        });

        // Bouton pour afficher le résultat dans une nouvelle fenêtre
        document.getElementById('showResultsBtn').addEventListener('click', function() {
            const results = checkAnswers();
            const resultsWindow = window.open('', 'Résultats du QCM', 'width=600,height=400,scrollbars=yes');
            
            let content = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Résultats du QCM</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; }
                        .correct { color: #27ae60; }
                        .incorrect { color: #e74c3c; }
                    </style>
                </head>
                <body>
                    <h1>Résultats du QCM</h1>
                    <p><strong>Score: ${results.score}/5</strong></p>
            `;
            
            results.details.forEach((detail, index) => {
                content += `
                    <p class="${detail.isCorrect ? 'correct' : 'incorrect'}">
                        ${detail.isCorrect ? '✓' : '✗'} La réponse de la question ${index + 1} est ${detail.isCorrect ? 'correcte' : 'incorrecte'}
                    </p>
                `;
            });
            
            content += `</body></html>`;
            
            resultsWindow.document.write(content);
            resultsWindow.document.close();
            
            // Ajuster la taille de la fenêtre selon le contenu
            setTimeout(() => {
                resultsWindow.resizeTo(650, resultsWindow.document.body.scrollHeight + 100);
            }, 100);
        });

        // Fonction pour vérifier les réponses
        function checkAnswers() {
            let score = 0;
            const details = [];
            
            // Vérifier les questions à choix multiples
            for (let i = 1; i <= 3; i++) {
                const questionName = `q${i}`;
                const selectedOptions = Array.from(document.querySelectorAll(`input[name="${questionName}"]:checked`))
                    .map(input => input.value);
                
                // Vérifier si les réponses sélectionnées correspondent aux bonnes réponses
                const isCorrect = arraysEqual(selectedOptions.sort(), correctAnswers[questionName].sort());
                
                if (isCorrect) {
                    score++;
                }
                
                details.push({
                    question: questionName,
                    isCorrect: isCorrect
                });
            }
            
            // Vérifier les questions à choix simples
            for (let i = 4; i <= 5; i++) {
                const questionName = `q${i}`;
                const selectedOption = document.querySelector(`input[name="${questionName}"]:checked`);
                
                const isCorrect = selectedOption && selectedOption.value === correctAnswers[questionName];
                
                if (isCorrect) {
                    score++;
                }
                
                details.push({
                    question: questionName,
                    isCorrect: isCorrect
                });
            }
            
            return {
                score: score,
                details: details
            };
        }

        // Fonction utilitaire pour comparer deux tableaux
        function arraysEqual(arr1, arr2) {
            if (arr1.length !== arr2.length) return false;
            for (let i = 0; i < arr1.length; i++) {
                if (arr1[i] !== arr2[i]) return false;
            }
            return true;
        }
    </script>
</body>
</html>